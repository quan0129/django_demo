from unittest import resultfrom django.http import HttpResponse, HttpResponseRedirectfrom django.shortcuts import render, get_object_or_404from .models import RawDataCaltalogfrom .forms import SearchFormfrom django.db.models import Qfrom django.views.generic import TemplateView, ListView, Viewfrom .filter import RawDataCaltalogFilterdef search(request):    # data = raw_data_caltalog.objects.all()    # id = 1    # data = raw_data_caltalog.objects.raw('''SELECT id, source    #                                         FROM monitor_db_search_raw_data_caltalog    #                                         WHERE id = %s''', [id])    # context = {'data': data}    return render(request, "base.html")def search_results(request):    form = SearchForm()    query = None    context = {}    query = request.GET.get("q")    results = RawDataCaltalog.objects.filter(Q(source__icontains=query))    context = {'form': form, 'query': query, 'results': results}    #         # results = raw_data_caltalog.objects.raw('''SELECT id, source    #         #                                             FROM monitor_db_search_raw_data_caltalog    #         #                                             WHERE id = %s''', [query])    #         results = raw_data_caltalog.objects.filter(Q(source__icontains=query))    return render(request, 'search.html', context)def monitor_filter(request):    query = None    context = {}    query_search_all = request.GET.get("search")    query_source_type = request.GET.get("source_type")    query_destination_type = request.GET.get("destination_type")    if query_search_all:        results_search_all = RawDataCaltalog.objects.raw('''        SELECT *        from monitor_db_search_rawdatacaltalog        WHERE  source LIKE  %s        UNION        SELECT *        from monitor_db_search_rawdatacaltalog        WHERE  destination LIKE %s ''', [('%'+query_search_all+'%'), ('%'+query_search_all+'%')])        context = {'result': results_search_all}        if query_source_type:            results_search = RawDataCaltalog.objects.raw('''                    SELECT *                    from monitor_db_search_rawdatacaltalog                    WHERE  source LIKE  %s and source_type = %s                    UNION                    SELECT *                    from monitor_db_search_rawdatacaltalog                    WHERE  destination LIKE %s ''', [('%' + query_search_all + '%'), (query_source_type), ('%' + query_search_all + '%')])            context = {'result': results_search}        if query_destination_type:            results_search = RawDataCaltalog.objects.raw('''                               SELECT *                               from monitor_db_search_rawdatacaltalog                               WHERE  source LIKE  %s and destination = %s                               UNION                               SELECT *                               from monitor_db_search_rawdatacaltalog                               WHERE  destination LIKE %s ''', [('%' + query_search_all + '%'), (query_destination_type),                                                                ('%' + query_search_all + '%')])            context = {'result': results_search}    if query_search_all and query_source_type and query_destination_type:        results_search = RawDataCaltalog.objects.raw('''                                       SELECT *                                       from monitor_db_search_rawdatacaltalog                                       WHERE  source LIKE  %s and source = %s and destination = %s                                       UNION                                       SELECT *                                       from monitor_db_search_rawdatacaltalog                                       WHERE  destination LIKE %s ''',                                                     [('%' + query_search_all + '%'), (query_source_type), (query_destination_type),                                                      ('%' + query_search_all + '%')])        context = {'result': results_search}    if query_source_type and query_search_all=='':        results_search = RawDataCaltalog.objects.filter(Q(source_type__icontains=query_source_type))        context = {'result': results_search}    if query_destination_type and query_search_all=='':        results_search = RawDataCaltalog.objects.filter(Q(destination_type__icontains=query_destination_type))        context = {'result': results_search}    if query_destination_type and query_source_type and query_search_all=='':        results_search = RawDataCaltalog.objects.filter(Q(source_type__icontains=query_source_type) & Q(destination_type__icontains=query_destination_type) )        context = {'result': results_search}    return render(request, 'filter.html', context)def detail_table(request, source):    detail_data = RawDataCaltalog.objects.get(source=source)    context = {'detail': detail_data}    print(context)    return render(request, 'detail.html', context)